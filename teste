
<?php

function abertura()
{
    echo "Olá, somos a rede central administradora de jogos!!!\n";
    $verifica = readline("Deseja jogar? ");
    if (strtolower($verifica) == "sim")
    {
        escolher_jogo();
    }
}

function escolher_jogo()
{
    echo "1- Mega Sena\n";
    echo "2- Quina\n";
    echo "3- Lotomania\n";
    echo "4- Lotofácil\n";
    $opcao = (int) readline("Escolha: ");
   
    $jogoGanhador = definirJogoGanhador($opcao); // Adicionado para definir o jogo ganhador

    switch ($opcao)
    {
        case 1:
            megaSena($jogoGanhador); // Passa o jogo ganhador como parâmetro
            break;
        case 2:
            quina($jogoGanhador); // Passa o jogo ganhador como parâmetro
            break;
        case 3:
            lotomania($jogoGanhador); // Passa o jogo ganhador como parâmetro
            break;
        case 4:
            lotofacil($jogoGanhador); // Passa o jogo ganhador como parâmetro
            break;
        default:
            echo "Jogo inválido\n";
            escolher_jogo();
            break;
    }
}

function megaSena($jogoGanhador)
{
    $numDezenas = obterNumDezenas("Mega Sena", 6, 20);
    $numApostas = obterNumApostas();

    for ($i = 1; $i <= $numApostas; $i++)
    {
        $dezenas = gerarDezenas(1, 60, $numDezenas);
        exibirAposta($i, $dezenas);
        compararJogos($dezenas, $jogoGanhador); // Compara os números do usuário com o jogo ganhador
    }
}

function quina($jogoGanhador)
{
    $numDezenas = obterNumDezenas("Quina", 5, 15);
    $numApostas = obterNumApostas();

    for ($i = 1; $i <= $numApostas; $i++)
    {
        $dezenas = gerarDezenas(1, 80, $numDezenas);
        exibirAposta($i, $dezenas);
        compararJogos($dezenas, $jogoGanhador);
    }
}

function lotomania($jogoGanhador)
{
    $numDezenas = obterNumDezenas("Lotomania", 50, 50);
    $numApostas = obterNumApostas();

    for ($i = 1; $i <= $numApostas; $i++)
    {
        $dezenas = gerarDezenas(1, 100, $numDezenas);
        exibirAposta($i, $dezenas);
        compararJogos($dezenas, $jogoGanhador);
    }
}

function lotofacil($jogoGanhador)
{
    $numDezenas = obterNumDezenas("Lotofácil", 15, 18);
    $numApostas = obterNumApostas();

    for ($i = 1; $i <= $numApostas; $i++)
    {
        $dezenas = gerarDezenas(1, 25, $numDezenas);
        exibirAposta($i, $dezenas);
        compararJogos($dezenas, $jogoGanhador);
    }
}

function obterNumDezenas($jogo, $min, $max)
{
    $numDezenas = (int) readline("Quantas dezenas para {$jogo}? ({$min} a {$max}): ");

    if ($numDezenas < $min || $numDezenas > $max)
    {
        echo "Número de dezenas inválido para {$jogo}.\n";
        return obterNumDezenas($jogo, $min, $max);
    }

    return $numDezenas;
}

function obterNumApostas()
{
    return (int) readline("Quantas apostas deseja gerar? ");
}

function gerarDezenas($min, $max, $quantidade)
{
    $dezenas = [];

    while (count($dezenas) < $quantidade)
    {
        $dezena = rand($min, $max);
        if (!in_array($dezena, $dezenas))
        {
            $dezenas[] = $dezena;
        }
    }

    sort($dezenas);

    return $dezenas;
}

function exibirAposta($numAposta, $dezenas)
{
    echo "Aposta {$numAposta}: " . implode(', ', $dezenas) . "\n";
}

function definirJogoGanhador($opcao)
{
    switch ($opcao)
    {
        case 1:
            return gerarDezenas(1, 60, 6);
        case 2:
            return gerarDezenas(1, 80, 5);
        case 3:
            return gerarDezenas(1, 100, 50);
        case 4:
            return gerarDezenas(1, 25, 15);
        default:
            return [];
    }
}

function compararJogos($jogoUsuario, $jogoGanhador)
{
    $numerosAcertados = array_intersect($jogoUsuario, $jogoGanhador);
    $quantidadeAcertos = count($numerosAcertados);

    echo "Número de acertos: $quantidadeAcertos\n";
}

abertura();
?>
